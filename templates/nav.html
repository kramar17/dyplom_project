{% load static i18n %}
<div class="header__container">
    <a href="{% url 'index' %}" class="company-name header__company-name">{{ site_name }}</a>
    <nav class="menu header__menu">
        <ul class="menu__list header__menu-list">
            <li class="menu__item">
                <a href="{% if request.path != '/' %}{% url 'index' %}#section-problems{% else %}#section-problems{% endif %}" class="menu__link">
                    {% trans "Чому ми?" %} 
                </a>
            </li>
            <li class="menu__item">
                <a href="{% if request.path != '/' %}{% url 'index' %}#section-describe{% else %}#section-describe{% endif %}" class="menu__link">
                    {% trans "Як це працює?" %} 
                </a>
            </li>
            <li class="menu__item">
                <a href="{% if request.path != '/' %}{% url 'index' %}#section-subscriptions{% else %}#section-subscriptions{% endif %}" class="menu__link">
                    {% trans "Вартість" %}
                </a>
            </li>
            <li class="menu__item">
                <a href="{% if request.path != '/' %}{% url 'index' %}#section-eating{% else %}#section-eating{% endif %}" class="menu__link">
                    {% trans "Переваги" %}
                </a>
            </li>
            <li class="menu__item">
                <a href="{% if request.path != '/' %}{% url 'index' %}#section-ask{% else %}#section-ask{% endif %}" class="menu__link">
                    {% trans "Запитайте нас" %}
                </a>
            </li>
        </ul>
    </nav>
    <a href="{% url 'our_shop' %}" class="btn header-btn">{% trans "Наш магазин" %}</a>
    
    <!-- Language switcher -->
    <form method="post" action="{% url 'set_language' %}" class="language-switcher">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <button type="submit" name="language" value="ua" class="language-link {% if LANGUAGE_CODE == 'ua' %}active{% endif %}">{% trans "Укр" %}</button>
        <button type="submit" name="language" value="en" class="language-link {% if LANGUAGE_CODE == 'en' %}active{% endif %}">{% trans "Eng" %}</button>
    </form>

    {% if user.is_authenticated %}
        {% if user.is_staff %}
            <nav class="menu header__menu">
                <ul class="menu__list header__menu-list">
                    <li class="menu__item"><a href="{% url 'manager_profile' %}" class="menu__link header__profile">{% trans "Особистий кабінет" %}</a></li>
                </ul>
            </nav>
        {% else %}
            <nav class="menu header__menu">
                <ul class="menu__list header__menu-list">
                    <li class="menu__item"><a href="{% url 'profile' %}" class="menu__link header__profile">{% trans "Особистий кабінет" %}</a></li>
                </ul>
            </nav>
        {% endif %}
        <nav class="menu header__menu">
            <ul class="menu__list header__menu-list">
                <li class="menu__item"><a href="{% url 'logout' %}" class="menu__link header__logout">{% trans "Вийти" %}</a></li>
            </ul>
        </nav>
    {% else %}
        <nav class="menu header__menu">
            <ul class="menu__list header__menu-list">
                <li class="menu__item"><a href="{% url 'login' %}" class="menu__link header__login">{% trans "Вхід" %}</a></li>
                <li class="menu__item"><a href="{% url 'register' %}" class="menu__link header__register">{% trans "Реєстрація" %}</a></li>
            </ul>
        </nav>
    {% endif %}
</div>

<style>
    .header__menu {
        display: flex;
        flex-direction: row;
    }

    .header__menu-list {
        display: flex;
        list-style-type: none;
        padding: 0;
        margin: 0;
        align-items: center;
    }

    .menu__link.header__login,
    .menu__link.header__register {
        font-size: 18px;
    }

    .header__container {
        display: flex;
        justify-content: flex-end;
        gap: 2.7em;
        align-items: center;
        max-width: 1360px;
        width: 95%;
        margin: 0 auto;
    }

    .language-switcher {
        display: flex;
        gap: 1em;
    }

    .language-link {
        text-decoration: none;
        color: #000;
        font-size: 16px;
        border: none;
        background: none;
        cursor: pointer;
    }

    .language-link.active {
        font-weight: bold;
        color: #007bff;
    }
</style>
